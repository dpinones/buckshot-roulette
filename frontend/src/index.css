@import "tailwindcss";

@theme {
  /* Surface & backgrounds */
  --color-meadow: #FFF8E7;
  --color-table-pink: #E8B4D8;
  --color-table-border: #C88FBB;
  --color-paper: #FFFDF5;
  --color-paper-shadow: #D4C5A9;

  /* Semantic */
  --color-heart-full: #FF4081;
  --color-heart-empty: #FFCDD2;
  --color-shell-live: #FF1744;
  --color-shell-blank: #90CAF9;
  --color-gold: #FFD700;
  --color-blood: #dc2626;
  --color-alive: #6AAF6A;
  --color-text-dark: #3E2723;
  --color-text-light: #795548;

  /* Agent colors */
  --color-calc: #89CFF0;
  --color-agro: #FF6B8A;
  --color-trap: #77DD77;
  --color-filo: #C3B1E1;
  --color-apre: #FFD580;
}

*, *::before, *::after { box-sizing: border-box; }

body {
  margin: 0;
  background: var(--color-meadow);
  color: var(--color-text-dark);
  font-family: 'Nunito', sans-serif;
  min-height: 100vh;
  -webkit-font-smoothing: antialiased;
}

/* Display font class */
.font-display {
  font-family: 'Fredoka One', cursive;
}

/* Data / monospace font */
.font-data {
  font-family: 'Comic Neue', cursive;
}

/* Paper Mario idle animation */
@keyframes paperIdle {
  0%, 100% { transform: translateY(0px) scaleX(1) scaleY(1); }
  25% { transform: translateY(-8px) scaleX(1.02) scaleY(0.98); }
  50% { transform: translateY(-3px) scaleX(0.98) scaleY(1.02); }
  75% { transform: translateY(-10px) scaleX(1.01) scaleY(0.99); }
}

@keyframes heartPop {
  0%, 100% { transform: scale(1); }
  30% { transform: scale(1.5); }
  60% { transform: scale(0.8); }
}

@keyframes bubbleFloat {
  0%, 100% { transform: translateX(-50%) translateY(0); }
  50% { transform: translateX(-50%) translateY(-10px); }
}

@keyframes confDrop {
  0% { transform: translateY(0) rotate(0deg); opacity: 1; }
  100% { transform: translateY(110vh) rotate(720deg); opacity: 0.5; }
}

@keyframes winBounce {
  from { transform: translateY(0); }
  to { transform: translateY(-16px); }
}

@keyframes slideUp {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes scaleIn {
  from { opacity: 0; transform: scale(0.92); }
  to { opacity: 1; transform: scale(1); }
}

/* ========================================
   Character Stage Position Classes
   ======================================== */
.char-slot {
  position: absolute;
  bottom: -14vh;
  pointer-events: auto;
  transform: translateX(-50%);
  transition:
    left 0.7s cubic-bezier(0.34, 1.56, 0.64, 1),
    height 0.7s cubic-bezier(0.34, 1.56, 0.64, 1),
    bottom 0.7s cubic-bezier(0.34, 1.56, 0.64, 1),
    opacity 0.5s ease,
    filter 0.5s ease;
}

.char-slot img {
  height: 100%;
  width: auto;
  object-fit: contain;
  filter: drop-shadow(6px 8px 4px rgba(0,0,0,0.3));
}

.char-slot:not(.dead-char) img {
  animation: paperIdle 4s ease-in-out infinite;
}

.char-slot:nth-child(1) img { animation-delay: 0s; }
.char-slot:nth-child(2) img { animation-delay: 0.8s; }
.char-slot:nth-child(3) img { animation-delay: 1.6s; }
.char-slot:nth-child(4) img { animation-delay: 2.4s; }
.char-slot:nth-child(5) img { animation-delay: 0.4s; }

.char-slot.pos-center {
  left: 50%;
  height: 52vh;
  bottom: -14vh;
  z-index: 8;
  opacity: 1;
}

.char-slot.pos-left {
  left: 16%;
  height: 40vh;
  bottom: -10vh;
  z-index: 5;
  opacity: 1;
}

.char-slot.pos-right {
  left: 84%;
  height: 40vh;
  bottom: -10vh;
  z-index: 5;
  opacity: 1;
}

.char-slot.pos-off-left {
  left: -15%;
  height: 34vh;
  bottom: -10vh;
  z-index: 4;
  opacity: 0;
  pointer-events: none;
}

.char-slot.pos-off-right {
  left: 115%;
  height: 34vh;
  bottom: -10vh;
  z-index: 4;
  opacity: 0;
  pointer-events: none;
}

.char-slot.pos-hidden {
  left: 50%;
  height: 30vh;
  bottom: -10vh;
  z-index: 3;
  opacity: 0;
  pointer-events: none;
}

.char-slot.dead-char img {
  filter: grayscale(0.8) brightness(0.6) drop-shadow(6px 8px 4px rgba(0,0,0,0.3));
  opacity: 0.4;
  animation: none !important;
}

/* ========================================
   Shotgun Overlay (on character during shot)
   ======================================== */
.shotgun-overlay {
  position: absolute;
  bottom: 12vh;
  z-index: 10;
  pointer-events: none;
  animation: shotgunAppear 0.25s ease-out both;
  transition: left 0.3s ease-out;
}

.shotgun-overlay img {
  width: min(50vw, 450px);
  height: auto;
  filter: drop-shadow(4px 5px 8px rgba(0,0,0,0.5));
}

@keyframes shotgunAppear {
  from { opacity: 0; }
  to { opacity: 1; }
}

/* ========================================
   Shotgun Recoil Animation
   ======================================== */
@keyframes shotgunRecoil {
  0% { transform: scale(1); }
  20% { transform: scale(1.08) translateX(-6px); }
  50% { transform: scale(0.97); }
  100% { transform: scale(1); }
}

.shotgun-recoil {
  animation: shotgunRecoil 0.4s ease-out;
}

/* ========================================
   Character Damage Animation
   ======================================== */
@keyframes charDamage {
  0% { filter: brightness(1) drop-shadow(6px 8px 4px rgba(0,0,0,0.3)); transform: translateX(0); }
  15% { filter: brightness(2) drop-shadow(0 0 20px rgba(255,0,0,0.8)); transform: translateX(-8px); }
  30% { filter: brightness(0.7) drop-shadow(0 0 10px rgba(255,0,0,0.4)); transform: translateX(8px); }
  45% { filter: brightness(1.5); transform: translateX(-4px); }
  60% { filter: brightness(0.8); transform: translateX(4px); }
  80% { filter: brightness(1.1); transform: translateX(-2px); }
  100% { filter: brightness(1) drop-shadow(6px 8px 4px rgba(0,0,0,0.3)); transform: translateX(0); }
}

.char-slot.taking-damage img {
  animation: charDamage 0.6s ease-out !important;
}

/* ========================================
   Agent Card Damage Animation
   ======================================== */
@keyframes cardDamage {
  0%   { transform: translateX(0); }
  10%  { transform: translateX(-5px); }
  20%  { transform: translateX(5px); }
  30%  { transform: translateX(-4px); }
  40%  { transform: translateX(4px); }
  50%  { transform: translateX(-3px); }
  60%  { transform: translateX(3px); }
  70%  { transform: translateX(-2px); }
  80%  { transform: translateX(2px); }
  90%  { transform: translateX(-1px); }
  100% { transform: translateX(0); }
}

.card-damage {
  animation: cardDamage 0.5s ease-out !important;
  border-color: #FF1744 !important;
  outline: 3px solid rgba(255, 23, 68, 0.5);
  outline-offset: 2px;
  background: rgba(255, 100, 100, 0.85) !important;
}

/* ========================================
   Ready / Go Overlay
   ======================================== */
.ready-go-img {
  position: relative;
  z-index: 1;
  width: min(60vw, 500px);
  height: auto;
  filter: drop-shadow(0 8px 24px rgba(0,0,0,0.4));
}

@keyframes readyIn {
  0% { opacity: 0; transform: scale(0.3) rotate(-8deg); }
  50% { opacity: 1; transform: scale(1.15) rotate(3deg); }
  70% { transform: scale(0.95) rotate(-1deg); }
  100% { opacity: 1; transform: scale(1) rotate(0deg); }
}

.ready-in {
  animation: readyIn 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) both;
}

@keyframes goIn {
  0% { opacity: 0; transform: scale(0.2); }
  40% { opacity: 1; transform: scale(1.3); }
  65% { transform: scale(0.9); }
  80% { transform: scale(1.08); }
  100% { opacity: 1; transform: scale(1); }
}

@keyframes goOut {
  0% { opacity: 1; transform: scale(1); }
  100% { opacity: 0; transform: scale(1.8); }
}

.go-in {
  animation: goIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) both,
             goOut 0.4s ease-in 0.6s both;
}

/* ========================================
   Volume Slider — pastel theme
   ======================================== */
.volume-slider {
  -webkit-appearance: none;
  appearance: none;
  background: transparent;
  outline: none;
}

.volume-slider::-webkit-slider-runnable-track {
  height: 8px;
  border-radius: 4px;
  background: linear-gradient(90deg, var(--color-table-pink) 0%, var(--color-heart-empty) 100%);
  border: 1.5px solid var(--color-paper-shadow);
}

.volume-slider::-moz-range-track {
  height: 8px;
  border-radius: 4px;
  background: linear-gradient(90deg, var(--color-table-pink) 0%, var(--color-heart-empty) 100%);
  border: 1.5px solid var(--color-paper-shadow);
}

.volume-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 20px;
  height: 20px;
  margin-top: -7.5px;
  border-radius: 50%;
  background: var(--color-heart-full);
  border: 2.5px solid white;
  box-shadow: 0 1px 4px rgba(0,0,0,0.2);
  cursor: pointer;
  transition: transform 0.15s ease;
}

.volume-slider::-moz-range-thumb {
  width: 20px;
  height: 20px;
  border-radius: 50%;
  background: var(--color-heart-full);
  border: 2.5px solid white;
  box-shadow: 0 1px 4px rgba(0,0,0,0.2);
  cursor: pointer;
  transition: transform 0.15s ease;
}

.volume-slider::-webkit-slider-thumb:hover {
  transform: scale(1.2);
}

.volume-slider::-moz-range-thumb:hover {
  transform: scale(1.2);
}

/* ========================================
   Item Use Overlay
   ======================================== */
.item-use-img {
  position: relative;
  z-index: 1;
  width: min(20vw, 160px);
  height: auto;
  filter: drop-shadow(0 8px 24px rgba(0,0,0,0.4));
  animation: itemIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) both,
             itemOut 0.4s ease-in 0.8s both;
}

@keyframes itemIn {
  0% { opacity: 0; transform: scale(0.3) rotate(-10deg); }
  50% { opacity: 1; transform: scale(1.15) rotate(3deg); }
  70% { transform: scale(0.95) rotate(-1deg); }
  100% { opacity: 1; transform: scale(1) rotate(0deg); }
}

@keyframes itemOut {
  0% { opacity: 1; transform: scale(1); }
  100% { opacity: 0; transform: scale(1.6); }
}

/* ========================================
   Glass Panel Utility
   ======================================== */
.glass-panel {
  background: rgba(255, 253, 245, 0.85);
  backdrop-filter: blur(4px);
  border: 3px solid rgba(212, 197, 169, 0.4);
  border-radius: 18px;
  box-shadow: 4px 4px 0 var(--color-paper-shadow);
}

/* ========================================
   Title Entrance Animation
   ======================================== */
@keyframes titleDrop {
  0% { opacity: 0; transform: translateY(-20px) scale(0.95); }
  60% { transform: translateY(4px) scale(1.02); }
  100% { opacity: 1; transform: translateY(0) scale(1); }
}

.animate-title-drop {
  animation: titleDrop 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) both;
}

/* Scrollbar — warm theme */
::-webkit-scrollbar { width: 4px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: var(--color-paper-shadow); border-radius: 2px; }
::-webkit-scrollbar-thumb:hover { background: var(--color-text-light); }
